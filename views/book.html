<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Book Salon Services</title>
    <link rel="stylesheet" href="/views/style/main.css">
</head>
<body>
    <nav>
        <a href="/user-dashboard" id="userDashboardBtn">My Bookings</a>
        <button id="logoutBtn" style="float: right; background: #ff4757; color: white; border: none; padding: 8px 16px; border-radius: 4px; cursor: pointer;">Logout</button>
    </nav>
    <h1>Book Salon Services</h1>
    
    <div class="form-section">
        <h3>Step 1: Choose Your Date</h3>
        <div class="calendar-container">
            <label>Select Date:
                <input type="date" id="bookingDate" name="bookingDate" required>
            </label>
            <div><small>Choose the date you want to book your appointment</small></div>
        </div>
    </div>

    <div class="form-section">
        <h3>Step 2: Select Services</h3>
        <form id="searchForm">
            <label>Choose Services:
                <select id="serviceSelect" name="services" multiple size="6" required>
                    <!-- Options will be populated by JS -->
                </select>
                <div><small>Hold Ctrl (Cmd on Mac) to select multiple options</small></div>
            </label>
        </form>
    </div>

    <div class="form-section">
        <h3>Step 3: Enter Your Location</h3>
        <label>Your Address:
            <input type="text" id="userAddress" name="address" placeholder="Enter your address">
        </label>
        <button type="button" id="useGeolocation">Use My Location</button>
    </div>

    <button type="button" id="findSalonsBtn">Find Available Salons</button>

    <h2>Available Salons</h2>
    <div id="salonResults"></div>
    
    <!-- Find this section in your book.html file -->
<div id="bookingModal" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); align-items:center; justify-content:center;">
    <div style="background:#fff; padding:24px; border-radius:8px; max-width:400px; margin:auto; position:relative;">
        <button id="closeBookingModal" style="position:absolute; top:8px; right:8px;">&times;</button>
        <h3>Book Appointment</h3>

        <!-- âœ… FIX: Add these two elements to display the service info -->
        <h4 id="modalServiceName" style="text-align:center; margin: 10px 0; color: #333;"></h4>
        <p id="modalServicePrice" style="text-align:center; margin-bottom: 20px; font-weight: bold;"></p>

        <form id="bookingForm">
            <input type="hidden" id="modalBusinessId" name="business_id">
            <input type="hidden" id="modalServiceId" name="service_id">
            <input type="hidden" id="modalBookingDate" name="booking_date">
            <div>
                <label for="modalTimeSlot">Select Time Slot:</label>
                <select id="modalTimeSlot" name="booking_time" required>
                    <option value="">-- Select a time --</option>
                </select>
            </div>
            <!-- These next fields are pre-filled by the script, so they can be hidden -->
            <div style="display:none;">
                <label for="modalUserName">Your Name:</label>
                <input type="text" id="modalUserName" name="user_name" required readonly>
            </div>
            <div style="display:none;">
                <label for="modalUserEmail">Email:</label>
                <input type="email" id="modalUserEmail" name="user_email" readonly>
            </div>
            <div style="display:none;">
                <label for="modalUserPhone">Phone:</label>
                <input type="tel" id="modalUserPhone" name="user_phone" readonly>
            </div>
            <button type="submit">Proceed to Payment</button>
        </form>
        <div id="bookingFeedback"></div>
    </div>
</div>

    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jwt-decode/build/jwt-decode.min.js"></script>
    <script src="/views/js/book.js"></script>
</body>
</html> 